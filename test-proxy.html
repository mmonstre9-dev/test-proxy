<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Test Proxy LibreLinkUp</title>
<style>
  body{font-family:sans-serif;background:#f7f7f7;text-align:center;margin:40px}
  input,button{padding:10px;margin:5px;border-radius:8px;border:1px solid #ccc;width:250px}
  button{background:#81D8D0;color:#fff;border:none;cursor:pointer}
  pre{background:#fff;padding:10px;border-radius:10px;max-width:90%;margin:auto;text-align:left;overflow:auto}
</style>
</head>
<body>

<h2>üîç Test connexion Proxy LibreLinkUp</h2>
<p>Entre ton email et ton mot de passe LibreLinkUp, puis clique sur ‚ÄúTester‚Äù.</p>

<input id="email" placeholder="Email LibreLinkUp"><br>
<input id="password" type="password" placeholder="Mot de passe"><br>
<button onclick="testProxy()">Tester</button>

<h3>R√©sultat :</h3>
<pre id="result">...</pre>

<script>
const PROXY_URL = "https://glycemie-proxy.onrender.com"; // ‚Üê change ici si ton proxy a un autre lien

async function testProxy(){
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  document.getElementById("result").textContent = "Connexion en cours...";
  try{
    const res = await fetch(`${PROXY_URL}/llu/auth/login`, {
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({email,password})
    });
    const text = await res.text();
    document.getElementById("result").textContent =
      `Code : ${res.status}\n\n${text}`;
  }catch(e){
    document.getElementById("result").textContent =
      "Erreur r√©seau :\n" + e.message;
  }
}
</script>

</body>
</html>
